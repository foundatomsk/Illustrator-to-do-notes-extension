<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HITAI â€” Project Tab</title>
  <link rel="stylesheet" href="css/style.css" />
  <script type="module" src="js/app.js"></script>
</head>

<body>
  <div class="frame">
    <header class="topbar">
      <img src="img/hitai_logo.png" class="brand-logo" alt="HITAI" />
    </header>

    <!-- Global Project Selector -->
    <section class="projects global-projects">
      <div class="left">
        <label class="pill-select">
          <select id="projectSelect" aria-label="Project select">
          </select>
          <span class="caret"></span>
        </label>
      </div>
      <div class="icons">
        <button class="icon chevron" id="btnEditProject" aria-label="Edit Project"></button>
        <button class="icon oval" id="btnDeleteProject" aria-label="Delete Project"></button>
        <button class="icon plus" id="btnAddProject" aria-label="Add Project"></button>
      </div>
    </section>

    <!-- Tab Navigation -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="todo">Tasks</button>
      <button class="tab-btn" data-tab="notes">Notes</button>
    </nav>

    <!-- TODO SECTION -->
    <div id="todo-panel" class="tab-panel active">
      <section class="adder" id="adderSection">
        <label class="pill-input wide">
          <input type="text" id="newItemInput" placeholder="Add Line Item" aria-label="Add line item" />
        </label>
        <button class="icon plus large" id="addBtn" aria-label="Add item"></button>
      </section>

      <hr class="rule" />

      <section class="list">
        <h2>LIST</h2>
        <hr class="rule thin" />
        <ul class="items" id="checklist">
        </ul>
      </section>
    </div>

    <!-- NOTES SECTION -->
    <div id="notes-panel" class="tab-panel" style="display:none;">
      <section class="adder">
        <button class="btn-primary" id="addNoteBtn">+ New Note</button>
      </section>
      <div id="notesList" class="notes-grid">
        <!-- Notes injected here -->
      </div>
    </div>
  </div>

  <!-- Custom Modals -->
  <dialog id="deleteModal" class="modal">
    <div class="modal-content">
      <h3>Delete Project?</h3>
      <p>Are you sure you want to delete this project? All tasks and notes in it will be lost.</p>
      <div class="modal-actions">
        <button class="btn-text" id="btnCancelDelete">Cancel</button>
        <button class="btn-primary danger" id="btnConfirmDelete">Delete</button>
      </div>
    </div>
  </dialog>

  <dialog id="renameModal" class="modal">
    <div class="modal-content">
      <h3>Rename Project</h3>
      <label class="pill-input wide">
        <input type="text" id="inputRename" placeholder="Project Name" />
      </label>
      <div class="modal-actions">
        <button class="btn-text" id="btnCancelRename">Cancel</button>
        <button class="btn-primary" id="btnConfirmRename">Save</button>
      </div>
    </div>
  </dialog>

  <dialog id="deleteNoteModal" class="modal">
    <div class="modal-content">
      <h3>Delete Note?</h3>
      <p>Are you sure you want to delete this note?</p>
      <div class="modal-actions">
        <button class="btn-text" id="btnCancelDeleteNote">Cancel</button>
        <button class="btn-primary danger" id="btnConfirmDeleteNote">Delete</button>
      </div>
    </div>
  </dialog>
  <script>
    // Simple Tab Logic Inline for now, or could be in a shared UI controller
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        // Toggle Buttons
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Toggle Panels
        document.querySelectorAll('.tab-panel').forEach(p => p.style.display = 'none');
        const target = btn.dataset.tab === 'todo' ? 'todo-panel' : 'notes-panel';
        document.getElementById(target).style.display = 'block';
      });
    });
  </script>
</body>

</html>
